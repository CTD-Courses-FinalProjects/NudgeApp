<div style="text-align: center; height: 100%; width: 100%">

  <%- include("../partials/messages") %> 

  <% const bgColor = (event) => { 
    let color = 'blue'; 
    if(event.eventType === 'birthday') { 
      color='red';
    } else if(event.eventType === 'wedding'){
      color='purple';
    }
  return color;
  } %>

  <div class="container mt-4">
    <h1 class="text-center mb-3"><i class="far fa-id-card"></i> My Events</h1>


    <div class="d-flex flex-column">

      <div class = "btn-toolbar" role = "toolbar" style="padding: 20px;">
          <a
        href="/api/v1/events/addEvent"
        class="btn btn-primary"
        style="width: 50px"
        data-bs-toggle="tooltip"
        data-bs-placement="bottom"
        title="Add Task"
        aria-describedby="tooltip758359"
      >
        <i class="fas fa-plus"></i>
      </a>
      </div>


      <div
        class="d-flex m-3 flex-wrap"
        style="width: 100%; justify-content: center"
      >
        <% if (events.length > 0) { %> 
         
          <% events.forEach(function(event){ %>

          <div
            class="card mb-3 d-flex row card-body"
            style="<%=`box-shadow: 1px 10px 20px #858b9259; padding: 0; margin: 10px; width: 370px; border: 3px solid; border-radius: 10px; border-color: ${bgColor(event)};`%>"
          >
            <div
              class="d-flex"
              style="height: 100%; width: 60%; justify-content: center"
            >
              <h4 style="word-break: break-word; margin: auto"><%= event.title %></h4>
            </div>

            <div
              class="d-flex flex-column"
              style=" height: 100%; justify-content: space-around;"
            >
              <div class="d-flex flex-column">
                <h5 class="card-text">
                  <%= event.eventDate.toString().slice(0,15) %>
                </h5>

                <% if(event.eventType === 'birthday') { %>
                <p class="card-text">years</p>
                <%}%>
              </div>

              <div
                class="d-flex row"
                style="justify-content: flex-end; width: 100%"
              >
                <a href=<%= "/api/v1/events/editEvent/" + event.id %>
                  class="btn btn">
                  <i class="fas fa-pen"></i>
                </a>
                <a href=<%= "/api/v1/events/deleteEvent/" + event.id %>
                  class="btn btn">
                  <i class="far fa-trash-alt"></i>
                </a>
              </div>

            </div>
          
          </div>

        <%})%>

      <% } else { %>
      <h2>There are no events to display.</h2>
      <% } %>
      </div>

    </div>


</div>
</div>

<script>
  var tooltipTriggerList = [].slice.call(
    document.querySelectorAll('[data-bs-toggle="tooltip"]')
  );
  var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
    return new bootstrap.Tooltip(tooltipTriggerEl);
  });

  var bgColor = (event) => {
    if (event.eventType === "birthdayt") {
      return "red";
    }
  };
</script>
